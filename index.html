<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dashboard Expired</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="container">

<h2>Dashboard Expired</h2>

<div class="input-box">
  <input id="name" placeholder="Nama Kategori (ex: All Syrup)">
</div>
<button onclick="add()">Tambah</button>

<hr>

<div id="list"></div>

<script src="db.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const list = document.getElementById('list');
  const name = document.getElementById('name');

  openDB(() => {
    seed();
    render();
  });

  function seed() {
    getAllTemplates(data => {
      if (data.length === 0) {
        saveTemplate({ id: Date.now(), name: 'All Syrup', orders: [] });
        saveTemplate({ id: Date.now()+1, name: 'Food', orders: [] });
      }
    });
  }

  window.add = function () {
    if (!name.value.trim()) return alert('Isi nama');
    saveTemplate({
      id: Date.now(),
      name: name.value.trim(),
      orders: []
    }, () => {
      name.value = '';
      render();
    });
  };

  window.del = function (id) {
    if (!confirm('Hapus kategori?')) return;
    deleteTemplate(id, render);
  };

  function render() {
    list.innerHTML = '';
    getAllTemplates(data => {
      data.forEach(t => {
        list.innerHTML += `
          <div class="order-card">
            <b>${t.name}</b><br>
            Total item: ${t.orders.length}<br>
            <button onclick="location.href='expired.html?id=${t.id}'">Buka</button>
            <button onclick="del(${t.id})">Hapus</button>
          </div>
        `;
      });
    });
  }
});
</script>

</body>
</html>

 